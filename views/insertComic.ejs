<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="ThemeBucket">
    <link rel="shortcut icon" href="#" type="image/png">
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>

    <title>漫画上架-我的漫画</title>

    <link href="css/style.css" rel="stylesheet">
    <link href="css/style-responsive.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->

    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.staticfile.org/webuploader/0.1.1/webuploader.css">
    <script src="https://cdn.staticfile.org/webuploader/0.1.1/webuploader.min.js"></script>
    <script src="https://cdn.staticfile.org/webuploader/0.1.1/Uploader.swf"></script>
</head>

<body class="horizontal-menu-page">

<section>

    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index">
                    <img src="images/logo.png" alt="">
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li><a href="index">漫画展示</a></li>
                    <li class="active"><a href="selectItem">漫画上架</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">分类管理<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="changeType">类型管理</a></li>
                            <li><a href="changeSort">分类管理</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">UI Kits <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">General</a></li>
                            <li><a href="#">Buttons</a></li>
                            <li><a href="#">Widget</a></li>
                            <li><a href="#">Slider</a></li>
                            <li><a href="#">Many More</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Fontawesome</a></li>

                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <form class="navbar-form navbar-left" role="search">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search">
                            </div>
                        </form>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"> <img alt=""
                                                                                         src="images/photos/user-avatar.png">
                            John Doe <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Profile</a></li>
                            <li><a href="#">Settings</a></li>
                            <li><a href="#">Log Out</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>


    <!--body wrapper start-->
    <div class="wrapper">

        <div class="row">
            <div class="col-lg-8" style="margin: 0 17%;">
                <section class="panel">
                    <header class="panel-heading">
                        漫画信息
                    </header>
                    <div class="panel-body">
                        <form role="form" method="post" action="/insertComic">
                            <div class="form-group">
                                <label for="name">名称</label>
                                <input type="text" class="form-control" name="name" id="name" placeholder="请输入漫画名称">
                            </div>
                            <div class="form-group">
                                <label for="author">作者</label>
                                <input style="margin-bottom: 15px;" type="text" class="form-control" name="author"
                                       id="author" placeholder="请输入主笔">
                                <input style="margin-bottom: 15px;" type="text" class="form-control" name="author2"
                                       id="author2" placeholder="请输入作者2">
                                <input style="margin-bottom: 15px;" type="text" class="form-control" name="author3"
                                       id="author3" placeholder="请输入作者3">
                            </div>
                            <div class="form-group">
                                <label for="hot">热度</label><!-- 后续将会删除 -->
                                <input type="text" class="form-control" name="hot" id="hot" placeholder="请输入热度">
                            </div>
                            <div class="form-group">
                                <label for="popular">人气值</label>
                                <input type="text" class="form-control" name="popular" id="popular"
                                       placeholder="请输入人气值">
                            </div>
                            <div class="form-group">
                                <label for="comment">评论条数</label>
                                <input type="text" class="form-control" name="comment" id="comment"
                                       placeholder="请输入评论条数">
                            </div>
                            <div class="form-group">
                                <label for="attention">关注人数</label>
                                <input type="text" class="form-control" name="attention" id="attention"
                                       placeholder="请输入关注人数">
                            </div>
                            <div class="form-group">
                                <label for="likes">点赞人数</label>
                                <input type="text" class="form-control" name="likes" id="likes" placeholder="请输入点赞人数">
                            </div>
                            <div class="form-group" id="addsort">
                                <label for="sort">分类</label>
                                <a href="javascript:void(0);" class="btn btn-primary pull-right" id="addselect">+</a>
                                <select class="form-control m-bot15 pull-right" name="sort" id="sort">
                                    <% sortName.forEach(function (sortName) { %>
                                    <option value="<%= sortName.name %>"><%= sortName.name %></option>
                                    <% }) %>
                                </select>
                                <div class="clearfix"></div>
                            </div>
                            <div class="form-group">
                                <label for="type">类型</label>
                                <select class="form-control m-bot15" name="type" id="type">
                                    <% typeName.forEach(function (typeName) { %>
                                    <option value="<%= typeName.TypeName %>"><%= typeName.TypeName %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="ImgUrl">详情图片</label>
                                <label for="ImgUrl">详情图片地址：<input name="detailsImgUrl" id="detailsImgUrl" type="text"
                                                                  value=""></label>

                                <div id="fileList" class="uploader-list"></div>
                                <div id="filePicker">选择图片</div>
                                <div id="pickerImg" style="height: 100px; width: 100px;"></div>
                                <!--<label for="ImgUrl">轮播图图片</label>-->
                                <!--<div id="fileList" class="uploader-list"></div>-->
                                <!--<div id="filePicker">选择图片</div>-->

                                <!--<label for="ImgUrl">间隔图片</label>-->
                                <!--<div id="fileList" class="uploader-list"></div>-->
                                <!--<div id="filePicker">选择图片</div>-->

                                <!--<label for="ImgUrl">佳作推荐图片</label>-->
                                <!--<div id="fileList" class="uploader-list"></div>-->
                                <!--<div id="filePicker">选择图片</div>-->
                                <!---->
                                <!--<label for="ImgUrl">首页展示图片</label>-->
                                <!--<div id="fileList" class="uploader-list"></div>-->
                                <!--<div id="filePicker">选择图片</div>-->
                            </div>
                            <div class="form-group">
                                <label for="state">状态</label>
                                <select class="form-control m-bot15" name="state" id="state">
                                    <option value="0">连载</option>
                                    <option value="1">完结</option>
                                    <option value="4">断更</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="count">话数</label>
                                <input type="text" class="form-control" name="count" id="count" placeholder="请输入当前总话数">
                            </div>
                            <div class="form-group">
                                <label for="introduction">简介</label>
                                <textarea rows="6" class="form-control" name="introduction"
                                          id="introduction"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">提交</button>
                        </form>
                    </div>
                </section>
            </div>
        </div>
    </div>
    <!--body wrapper end-->

    <!--footer section start-->
    <footer class="sticky-footer">
        Footer contents goes here
    </footer>
    <!--footer section end-->

</section>

<!-- Placed js at the end of the document so the pages load faster -->
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/jquery-ui-1.9.2.custom.min.js"></script>
<script src="js/jquery-migrate-1.2.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/modernizr.min.js"></script>
<script src="js/jquery.nicescroll.js"></script>

<!--common scripts for all pages-->
<script src="js/scripts.js"></script>
<script>
    $(function () {
        var i = 1;
        $("#addselect").click(function () {
            if (i < 3) {
                var $select = $("<select class='form-control m-bot15 pull-right' name='sort" + i + "' id='sort'><% sortName.forEach(function (sortName) { %><option value='<%= sortName.name %>'><%= sortName.name %></option><% }) %></select>");
                $("#addsort").append($select);
                i++;
            }
        });

    });

    // 初始化Web Uploader
    var uploader = WebUploader.create({

        // 选完文件后，是否自动上传。
        auto: true,

        // swf文件路径
        swf: 'https://cdn.staticfile.org/webuploader/0.1.1/Uploader.swf',

        // 文件接收服务端。
        server: 'uploadIMG',

        // 选择文件的按钮。可选。
        // 内部根据当前运行是创建，可能是input元素，也可能是flash.
        pick: '#filePicker',

        // 只允许选择图片文件。
        accept: {
            title: 'Images',
            extensions: 'gif,jpg,jpeg,bmp,png',
            mimeTypes: 'image/*'
        }
    });

    // 当有文件添加进来的时候
    uploader.on('fileQueued', function (file) {

    });

    // 文件上传成功，给item添加成功class, 用样式标记上传成功。
    uploader.on('uploadSuccess', function (file, response) {

        console.log(response.key);
        //获得服务器的图片
        var url = response.url;
        var pickerImg = document.getElementById("pickerImg");

        var img = document.createElement('img');
        img.style.width = "100px";
        img.style.height = "100px";
        img.src = url;
        pickerImg.appendChild(img);

        var detailsImgUrl = document.getElementById("detailsImgUrl")
        detailsImgUrl.value = url;

    });

    // 文件上传失败，显示上传出错。
    uploader.on('uploadError', function (file) {

    });

    // 完成上传完了，成功或者失败，先删除进度条。
    uploader.on('uploadComplete', function (file) {
        console.log("上传完成");
        console.log(file);
    });
</script>
</body>
</html>
